<!doctype html>
<html lang="ko" xmlns="http://thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<meta charset="utf-8">
<title>질문게시판 글수정</title>

<!-- font style -->
<link rel="stylesheet" as="style" crossorigin
	href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

<!-- Template Stylesheet -->
<link rel="stylesheet" th:href="@{/css/style.css}" />

<!-- Bootstrap Stylesheet -->
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />

<!-- Icon Font Stylesheet -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
	rel="stylesheet" />
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
	rel="stylesheet" />
<script src="https://kit.fontawesome.com/3eb7b16202.js"
	crossorigin="anonymous"></script>
</head>

<body>
	<div class="container-xxl bg-white p-0">
		<!-- header start -->
		<nav th:replace="~{fragments/navbar :: navbarFragment}"></nav>
		<!-- header end -->

		<div class="container mt-5">
			<div class="row">
				<div class="col-lg-8">
					<article>
						<input type="hidden" id="question-quesNo"
							th:value="${question.quesNo}">
						<div
							style="background-color: #faf4f4; border-radius: 30px; display: flex; flex-direction: column; align-items: flex-start; padding: 10px;">

							<div style="width: 90%; height: 90%; margin: 30px auto">
								<a href="/questions">질문게시판 > </a> <br />
								<p style="height: 20px;" class="fw-bolder mb-1 fs-2"
									th:text="${question.quesTitle}"></p>
								<br />
								<div class="d-flex justify-content-start my-3">
									<div th:text="${nickname}" class="mx-2" style="color: #949494"></div>
									<div style="font-size: 13px"
										class="ms-auto text-muted fst-italic mb-2 justify-content"
										th:text="|작성일자 ${#temporals.format(question.quesRdate, 'yyyy-MM-dd HH:mm')}|"></div>
								</div>
								<hr style="width: 100%; margin: 10px auto; color: #b1b1b1">
								<section class="mb-5" style="width: 90%; margin: 0 auto;">
									<p class="fs-5 mb-4" th:text="${question.quesContent}"
										style="word-break: break-all;"></p>
									<img th:if="${question.quesFilepath != null}"
										th:src="@{${question.quesFilepath}}" width="400" height="400" />
								</section>

							</div>

							<div style="margin: 0 auto;"
								class="d-flex justify-content-center">
								<button type="button" id="modify-btn"
									th:if="${currentUserid == author}"
									th:onclick="|location.href='@{/new-question?quesNo={quesNo}(quesNo=${question.quesNo})}'|"
									class="btn btn-primary btn-sm" style="margin-right: 10px;">수정</button>
								<button type="button" id="delete-btn"
									th:if="${currentUserid == author}"
									class="btn btn-secondary btn-sm" style="margin-right: 10px;">삭제</button>
								<button type="button" id="list-btn"
									class="btn btn-secondary btn-sm">글 목록</button>
							</div>
						</div>
					</article>
				</div>
			</div>
		</div>

		<!-- Comment start -->
		<div class="container mt-5">
			<div class="card row col-lg-8">
				<div class="card-header bi bi-chat-dots" style="border-radius: 15px">
					<span th:if="${comments.size()}"
						th:text="' ' + ${comments.size()} + ' Comments'"></span>
				</div>
				<!-- Comment Content -->
				<ul id="comment-list" class="list-group-flush"
					style="list-style: none; padding: 12px;">
					<li th:each="comment : ${question.comments}"
						class="list-group-item">
						<div id="edit-cmt-box"
							class="d-flex justify-content-between align-items-center">
							<div>
								<!-- 댓글 번호 및 닉네임 -->
								<span class="comment-no" style="display: none;" type="hidden"
									th:text="${comment.quesCmtNo}"></span> <span
									class="comment-nickname" style="font-size: small"
									th:text="${comment.nickname}"></span>
								<!-- 댓글 생성일 -->
								<span style="font-size: x-small" class="comment-date"
									th:text="${#temporals.format(comment.quesCmtRdate, 'yyyy-MM-dd HH:mm:ss')}"></span>
								<!-- 수정 버튼 -->
								<button type="button" th:if="${currentUserid == comment.userid}"
									class="btn bi bi-pencil-square edit-comment-btn"
									style="font-size: 12px; padding: .1em .5em;"
									data-quesCmtNo="${comment.quesCmtNo}">수정</button>
								<!-- 삭제 버튼 -->
								<button type="button" th:if="${currentUserid == comment.userid}"
									class="btn bi bi-trash cmt-delete-btn"
									style="font-size: 12px; padding: .1em .5em;"
									data-quesCmtNo="${comment.quesCmtNo}">삭제</button>
								<!-- 댓글 내용 -->
								<span class="mt-2 comment-content"
									th:text="${comment.quesCmtContent}"
									style="display: block; font-size: 14px;"></span>
								<!-- 수정 폼 -->
								<div class="form-control edit-comment-form"
									style="display: none; width: 100%;">
									<textarea class="mt-2 edit-comment-textarea"
										id="editquesCmtContent"
										style="font-size: 14px; color: #212529;"
										onkeyup="countingLength(this);" rows="3"></textarea>
									<span id="counterEdit" style="font-size: 12px; margin: 8px;"></span>
									<button style="font-size: 12px; padding: .1em .5em;"
										class="btn save-comment-btn">저장</button>
									<button style="font-size: 12px; padding: .1em .5em;"
										class="btn cancel-comment-btn">취소</button>
								</div>
							</div>
						</div>
					</li>
				</ul>

				<!-- Comment Form -->
				<form id="comment-form" sec:authorize="isAuthenticated()">
					<input type="hidden" id="quesNo" th:value="${question.quesNo}">
					<div class="card-body mt-3">
						<textarea class="form-control" id="quesCmtContent"
							style="font-size: 14px;" placeholder="댓글을 입력하세요"
							onkeyup="countingLength(this);" rows="4"></textarea>
					</div>
					<div class="card-body" style="float: right;">
						<span id="counterCmt" style="font-size: 12px; margin: 8px;"></span>
						<button type="button" id="submit-comment"
							class="btn btn-outline-primary bi bi-pencil-square"
							style="font-size: 14px; padding: .275em .5em;">등록</button>
					</div>
				</form>
			</div>
		</div>
		<!-- Comment End -->

		<!-- footer Start -->
		<footer th:replace="~{fragments/footer :: footerFragment}"></footer>
		<!-- footer End -->
	</div>

	<!-- Template Javascript -->
	<script th:src="@{/js/main.js}"></script>
	<script th:src="@{/js/quesBoard.js}"></script>
	<script th:src="@{/js/contentCount.js}"></script>

</body>
</html>